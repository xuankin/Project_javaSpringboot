<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/head :: head}"></th:block>

    <title>Trang chủ - MotoRental</title>

    <style>
        .hero-section { background: linear-gradient(135deg, #1e88e5 0%, #42d392 100%); padding-top: 80px; padding-bottom: 120px; position: relative; margin-bottom: 4rem; }
        .stats-container { margin-top: -60px; position: relative; z-index: 10; }
        .stat-card { background: #f3e5f5; border-radius: 15px; padding: 20px; text-align: center; color: #4a148c; border: 1px solid rgba(255,255,255,0.5); transition: transform 0.3s ease; box-shadow: 0 10px 25px rgba(106, 27, 154, 0.15); }
        .stat-card:hover { transform: translateY(-5px); background: #e1bee7; box-shadow: 0 15px 35px rgba(106, 27, 154, 0.25); }
        .stat-card h2 { color: #4a148c; font-weight: 800; }
        .stat-card small { color: #7b1fa2; font-weight: 600; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px; }
        .vehicle-card { border: none; border-radius: 16px; overflow: hidden; background: #fff; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: all 0.3s ease; }
        .vehicle-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
        .card-img-wrapper { position: relative; height: 220px; background-color: #f8f9fa; overflow: hidden; }
        .card-img-top { height: 100%; width: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .vehicle-card:hover .card-img-top { transform: scale(1.05); }
        .badge-new { position: absolute; top: 15px; right: 15px; background-color: #00d2d3; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 5; }
        .rating-badge { background-color: #fbc531; color: white; font-size: 0.75rem; padding: 4px 8px; border-radius: 6px; display: inline-flex; align-items: center; gap: 3px; }
        .feature-tag { font-size: 0.75rem; color: #576574; background: #f1f2f6; padding: 4px 10px; border-radius: 20px; display: inline-block; margin-right: 4px; margin-bottom: 6px; }
        .price-pill { background: linear-gradient(to right, #0984e3, #00a8ff); color: white; padding: 6px 18px; border-radius: 50px; font-weight: 700; font-size: 1.1rem; display: inline-block; box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3); }
        .btn-action { border-radius: 8px; font-weight: 600; padding: 8px 0; transition: all 0.2s; }
        .btn-cart { background-color: #0984e3; color: white; border: none; }
        .btn-cart:hover { background-color: #74b9ff; color: white; }
        .btn-detail { background-color: #fd79a8; color: white; border: none; }
        .btn-detail:hover { background-color: #e84393; color: white; }
        .btn-banner { background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.5); color: white; }
        .btn-banner:hover { background: white; color: #1e88e5; }
    </style>
</head>

<body>
<nav th:replace="~{fragments/header :: header}"></nav>

<div class="hero-section text-center text-white">
    <div class="container">
        <h1 class="display-4 fw-bold mb-3">
            <i class="fas fa-motorcycle me-2"></i>Thuê Xe Máy Premium
        </h1>
        <p class="lead mb-4 mx-auto" style="max-width: 700px; opacity: 0.9;">
            Khám phá thành phố với đội xe máy chất lượng cao. Giá cả hợp lý, thủ tục đơn giản, giao xe tận nơi.
        </p>
        <a href="#vehicle-list" class="btn btn-banner btn-lg px-5 fw-bold rounded-pill shadow-lg">
            Khám phá ngay <i class="fas fa-arrow-down ms-2"></i>
        </a>
    </div>
</div>

<div class="container stats-container mb-5">
    <div class="row g-4 justify-content-center">
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <h2 class="fw-bold mb-0">1000+</h2>
                <small>Khách hàng hài lòng</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <h2 class="fw-bold mb-0">50+</h2>
                <small>Dòng xe đời mới</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <h2 class="fw-bold mb-0">24/7</h2>
                <small>Hỗ trợ kỹ thuật</small>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="stat-card">
                <h2 class="fw-bold mb-0">4.9 <i class="fas fa-star text-warning fs-6"></i></h2>
                <small>Điểm đánh giá</small>
            </div>
        </div>
    </div>
</div>

<div class="container mb-5" id="vehicle-list">
    <div class="d-md-flex justify-content-between align-items-end mb-4 p-4 rounded-3 bg-white shadow-sm border">
        <div class="mb-3 mb-md-0">
            <h3 class="fw-bold text-primary mb-1"><i class="fas fa-list-ul me-2"></i>Danh sách xe máy</h3>
            <p class="text-muted mb-0">Lựa chọn chiếc xe ưng ý cho hành trình của bạn</p>
        </div>

        <form action="/" method="get" class="d-flex" style="max-width: 400px;">
            <div class="input-group">
                <span class="input-group-text bg-white border-end-0"><i class="fas fa-search text-muted"></i></span>
                <input class="form-control border-start-0 ps-0" type="search" name="keyword" placeholder="Tìm tên xe (VD: Air Blade...)" aria-label="Search">
                <button class="btn btn-primary px-4 fw-bold" type="submit">Tìm</button>
            </div>
        </form>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        <div class="col" th:each="vehicle : ${popularVehicles != null ? popularVehicles : vehicles}">
            <div class="card h-100 vehicle-card">
                <div class="card-img-wrapper">
                    <a th:href="@{/vehicles/detail/{id}(id=${vehicle.id})}">
                        <img th:src="${vehicle.primaryImageUrl}" class="card-img-top" alt="Vehicle Image">
                    </a>
                    <span class="badge-new">Mới</span>
                </div>

                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <a th:href="@{/vehicles/detail/{id}(id=${vehicle.id})}" class="text-decoration-none text-dark">
                            <h5 class="card-title fw-bold mb-0" th:text="${vehicle.name}">Tên xe</h5>
                        </a>
                        <div class="rating-badge">
                            5.0 <i class="fas fa-star"></i>
                        </div>
                    </div>

                    <p class="text-muted small mb-3">
                        <i class="fas fa-info-circle me-1"></i>
                        <span th:text="${vehicle.brand} + ' • ' + ${vehicle.year}">Hãng - Năm</span>
                    </p>

                    <div class="mb-4">
                        <span class="feature-tag"><i class="fas fa-gas-pump"></i> Tiết kiệm xăng</span>
                        <span class="feature-tag"><i class="fas fa-shield-alt"></i> Bảo hiểm</span>
                        <span class="feature-tag"><i class="fas fa-tools"></i> Bảo dưỡng</span>
                    </div>

                    <div class="text-center mb-3">
                        <small class="text-muted bg-light px-2 py-1 rounded border">
                            BS: <span th:text="${vehicle.licensePlate}">59-X1</span>
                        </small>
                    </div>

                    <div class="text-center mb-4">
                        <div class="price-pill">
                            <span th:text="${#numbers.formatDecimal(vehicle.pricePerDay, 0, 'POINT', 0, 'COMMA')}">0</span>
                            <small style="font-size: 0.7em; font-weight: normal;">đ/ngày</small>
                        </div>
                    </div>

                    <div class="row g-2">
                        <div class="col-6">
                            <form th:action="@{/cart/add}" method="post">
                                <input type="hidden" name="vehicleId" th:value="${vehicle.id}">
                                <input type="hidden" name="startDate" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">
                                <input type="hidden" name="endDate" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}">

                                <button type="submit" class="btn btn-cart btn-action w-100">
                                    <i class="fas fa-cart-plus"></i> Giỏ hàng
                                </button>
                            </form>
                        </div>

                        <div class="col-6">
                            <a th:href="@{/vehicles/detail/{id}(id=${vehicle.id})}" class="btn btn-detail btn-action w-100 d-flex justify-content-center align-items-center text-decoration-none">
                                <i class="fas fa-eye me-1"></i> Chi tiết
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>